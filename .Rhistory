candidate_key$candidate_gender[is.na(candidate_key$candidate_gender)] <- "M"
write.csv(candidate_key, "./past_elections/presidential_2004/keyfiles/candidate_key_2004.csv", row.names = F)
# GET PROVINCIAL-LEVEL RESULTS ------------------------------------------------
eng_province_results_url <- "http://www.iec.org.af/public_html/Election%20Results%20Website/english/map.htm"
province_links <- getHTMLLinks(eng_province_results_url)
province_names <- read_html(eng_province_results_url) %>% html_nodes("a") %>% html_text()
province_results <- data.frame()
for(i in 1:length(province_links)){
url_target <- paste0("http://www.iec.org.af/public_html/Election%20Results%20Website/english/", province_links[i])
province_page <- read_html(url_target) %>% html_nodes("table") %>% html_table(fill = TRUE, trim = TRUE, header = TRUE)
province_table <- data.frame(province_page[[5]])
province_table <- province_table[-c(1, 20:24), ]
rownames(province_table) <- 1:dim(province_table)[1]
colnames(province_table) <- c("candidate_name_eng", "party_name_eng_transliterated", "votes", "pct_total")
province_table <- province_table %>% mutate(
province_code = str_pad(i, 2, pad = "0", side = "left"),
province_name_eng = province_names[i]) %>% dplyr::select(province_code, province_name_eng, everything())
province_results <- rbind(province_results, province_table)
Sys.sleep(2)
}
province_results$votes <- as.numeric(gsub(",", "", province_results$votes))
province_results_with_candidates <- left_join(province_results, candidate_key)
province_results_final <- province_results_with_candidates %>% dplyr::select(
province_code, province_name_eng, ballot_position, candidate_name_eng, party_name_eng_transliterated, candidate_gender, final_winner, votes
)
View(province_results_final)
province_results_final <- province_results_with_candidates %>% dplyr::select(
province_code, province_name_eng, ballot_position, candidate_name_eng, party_name_eng_transliterated, candidate_gender, final_winner, votes
) %>% arrange(province_code)
province_key <- province_results_final %>% dplyr::select(province_code, province_name_eng)
province_key <- province_results_final %>% dplyr::select(province_code, province_name_eng) %>% unique()
View(province_key)
province_key[631]
province_key[631, ]
province_key$province_name_eng[35]
province_key$province_name_eng[35] <- "Out-of-Country: Iran"
province_key$province_name_eng[36] <- "Out-of-Country: Pakistan"
dari_province_results_url <- "http://www.iec.org.af/public_html/Election%20Results%20Website/dari/provinces.htm"
dari_province_names <- read_html(dari_province_results_url) %>% html_nodes("a") %>% html_text()
dari_province_names
dari_province_names <- dari_province_names %>% data.frame() %>% mutate(province_code = str_pad(row_number(), 2, pad = "0", side = "left"))
View(dari_province_names)
?data.frame()
dari_province_names <- dari_province_names %>% data.frame() %>%
mutate(province_code = str_pad(row_number(), 2, pad = "0", side = "left")) %>%
rename(province_name_dari = .)
dari_province_names$.
dari_province_names <- read_html(dari_province_results_url) %>% html_nodes("a") %>% html_text()
dari_province_names_df <- dari_province_names %>% as.data.frame() %>%
mutate(province_code = str_pad(row_number(), 2, pad = "0", side = "left"))
View(dari_province_names_df)
dari_province_names_df <- dari_province_names %>% as.data.frame() %>%
mutate(province_code = str_pad(row_number(), 2, pad = "0", side = "left")) %>%
rename(province_name_dari = \.)
dari_province_names_df <- dari_province_names %>% as.data.frame() %>%
mutate(province_code = str_pad(row_number(), 2, pad = "0", side = "left")) %>%
rename(province_name_dari = .)
colnames(dari_province_names_df) <- c("province_name_dari", "province_code")
dari_province_names_df$province_name_dari[35]
dari_province_names_df$province_name_dari <- as.character(dari_province_names_df$province_name_dari)
View(dari_province_names_df)
dari_province_names_df$province_name_dari <- gsub("\r\n        ", "", dari_province_names_df$province_name_dari)
dari_province_names_df$province_name_dari[35]
dari_province_names_df$province_name_dari[36]
province_key$province_name_eng[35] <- "Out-of-Country - Iran"
province_key$province_name_eng[36] <- "Out-of-Country - Pakistan"
pashto_province_results_url <- "http://www.iec.org.af/public_html/Election%20Results%20Website/pashtu/pshprovinces.htm"
pashto_province_names <- read_html(pashto_province_results_url) %>% html_nodes("a") %>% html_text()
pashto_province_names_df <- pashto_province_names %>% as.data.frame() %>%
mutate(province_code = str_pad(row_number(), 2, pad = "0", side = "left"))
colnames(pashto_province_names_df) <- c("province_name_pashto", "province_code")
pashto_province_names_df$province_name_pashto <- as.character(pashto_province_names_df$province_name_pashto)
pashto_province_names_df$province_name_pashto <- gsub("\r\n        ", "", pashto_province_names_df$province_name_pashto)
View(pashto_province_names_df)
View(dari_province_names_df)
View(province_key)
write.csv(province_key, "./past_elections/presidential_2004/keyfiles/province_key_2004.csv", row.names = F)
iran <- dari_province_names_df$province_name_dari[35]
pakistan <- dari_province_names_df$province_name_dari[36]
province_key <- read.csv("./past_elections/presidential_2004/keyfiles/province_key_2004.csv", stringsAsFactors = F)
View(province_key)
pakistan_pash <- pashto_province_names_df$province_name_dari[36]
pakistan_pash <- pashto_province_names_df$province_name_pashto[36]
iran_pasho <- <- pashto_province_names_df$province_name_pashto[35]
iran_pasho <- pashto_province_names_df$province_name_pashto[35]
province_key$province_name_pashto[36] <- pakistan_pash
province_key$province_name_pashto[35] <- iran_pashto
province_key$province_name_pashto[35] <- iran_pasho
province_key$province_name_dari[35] <- iran
province_key$province_name_dari[36] <- pakistan
write.csv(province_key, "./past_elections/presidential_2004/keyfiles/province_key_2004.csv", row.names = F)
View(province_results_final)
province_results_final$province_name_eng[647]
province_results_final$province_name_eng[629]
province_results_final$province_name_eng <- gsub(" \r\n        ", " - ", dari_province_names_df$province_name_eng)
province_results_final$province_name_eng <- gsub(" \r\n        ", " - ", province_results_final$province_name_eng)
write.csv(province_results_final, "./past_elections/presidential_2004/keyfiles/final_af_candidate_province_data_2004.csv", row.names = F)
province_results_final$election_date <- dmy("09-10-2004")
View(province_results_final)
province_results_final$results_date <- dmy("03-11-2004")
province_results$results_status <- "FINAL"
province_results$election_type <- "PRESIDENTIAL"
province_results_final$results_status <- "FINAL"
province_results_final$election_type <- "PRESIDENTIAL"
province_results_final %>% dplyr::select(election_date, results_date, election_type, results_status, everything()) %>%
arrange(province_code, ballot_position)
province_results_final <- province_results_final %>% dplyr::select(election_date, results_date, election_type, results_status, everything()) %>%
arrange(province_code, ballot_position)
write.csv(province_results_final, "./past_elections/presidential_2004/keyfiles/final_af_candidate_province_data_2004.csv", row.names = F)
eng_final_candidate_total_url <- "http://www.iec.org.af/results_2009/resultsBallotOrder.html"
dari_final_candidate_total_url <- "http://www.iec.org.af/results_2009/Dari/resultsBallotOrder.html"
pashto_final_candidate_total_url <- "http://www.iec.org.af/results_2009/Pashto/resultsBallotOrder.html"
eng_candidate_list <- read_html(eng_final_candidate_total_url) %>% html_nodes("table") %>% html_table(fill = TRUE, trim = TRUE, header = TRUE)
eng_candidates <- data.frame(eng_candidate_list[[4]])
View(eng_candidates)
eng_candidate_list <- read_html(eng_final_candidate_total_url) %>% html_nodes("bodyPlainText") %>% html_table(fill = TRUE, trim = TRUE, header = TRUE)
eng_candidates <- data.frame(eng_candidate_list[[4]])
eng_candidate_list <- read_html(eng_final_candidate_total_url) %>% html_nodes("table") %>% html_table(fill = TRUE, trim = TRUE, header = TRUE)
eng_candidate_list
eng_candidates <- data.frame(eng_candidate_list[[3]])
View(eng_candidates)
eng_candidates <- eng_candidates %>% filter(!is.na(Ballot.Order))
colnames(eng_candidates) <- c("ballot_position", "candidate_name_eng", "unchallenged_votes", "added_votes", "total_votes", "pct_total")
View(eng_candidates)
eng_candidates$unchallenged_votes <- as.numeric(gsub(",", "", eng_candidates$unchallenged_votes))
eng_candidates$added_votes <- as.numeric(gsub(",", "", eng_candidates$added_votes))
eng_candidates$total_votes <- as.numeric(gsub(",", "", eng_candidates$total_votes))
View(eng_candidates)
write.csv(eng_candidates, "./past_elections/presidential_2009/raw/final_results_candidates.csv", row.names = F)
dari_candidate_list <- read_html(dari_final_candidate_total_url) %>% html_nodes("table") %>% html_table(fill = TRUE, trim = TRUE, header = TRUE)
dari_candidates <- data.frame(dari_candidate_list[[3]])
View(dari_candidates)
dari_candidates <- dari_candidates[-33, ]
dari_candidates <- dari_candidates %>% mutate(ballot_position = row_number())
View(eng_candidates)
eng_candidates$ballot_position[eng_candidates$ballot_position == "41"] <- "31"
colnames(dari_candidates) <- c("ballot_position_dari", "candidate_name_dari", "unchallenged_votes_dari", "added_votes_dari", "total_votes_dari", "pct_total_dari")
colnames(dari_candidates) <- c("ballot_position_dari", "candidate_name_dari", "unchallenged_votes_dari", "added_votes_dari", "total_votes_dari", "pct_total_dari", "ballot_position")
pashto_candidate_list <- read_html(pashto_final_candidate_total_url) %>% html_nodes("table") %>% html_table(fill = TRUE, trim = TRUE, header = TRUE)
pashto_candidates <- data.frame(pashto_candidate_list[[3]])
View(pashto_candidates)
dari_candidate_list <- read_html(dari_final_candidate_total_url) %>% html_nodes("table") %>% html_table(fill = TRUE, trim = TRUE, header = TRUE)
dari_candidates <- data.frame(dari_candidate_list[[3]])
dari_candidates <- dari_candidates[-33, ]
dari_candidates <- dari_candidates %>% mutate(ballot_position = row_number())
colnames(dari_candidates) <- c("ballot_position_dari", "candidate_name_dari", "unchallenged_votes_dari", "added_votes_dari", "total_votes_dari", "pct_total_dari", "ballot_position")
pashto_candidate_list <- read_html(pashto_final_candidate_total_url) %>% html_nodes("table") %>% html_table(fill = TRUE, trim = TRUE, header = TRUE)
pashto_candidates <- data.frame(pashto_candidate_list[[3]])
pashto_candidates <- pashto_candidates[-33, ]
pashto_candidates <- pashto_candidates %>% mutate(ballot_position = row_number())
colnames(pashto_candidates) <- c("ballot_position_pashto", "candidate_name_pashto", "unchallenged_votes_pashto", "added_votes_pashto", "total_votes_pashto", "pct_total_pashto", "ballot_position")
candidate_key <- eng_candidates %>% left_join(dplyr::select(dari_candidates, ballot_position, candidate_name_dari)) %>%
left_join(dplyr::select(pashto_candidates, ballot_position, candidate_name_pashto))
View(eng_candidates)
eng_candidates$ballot_position <- as.numeric(eng_candidates$ballot_position)
candidate_key <- eng_candidates %>% left_join(dplyr::select(dari_candidates, ballot_position, candidate_name_dari)) %>%
left_join(dplyr::select(pashto_candidates, ballot_position, candidate_name_pashto))
View(candidate_key)
View(dari_candidates)
candidate_key$candidate_name_dari <- gsub(" )", ")", candidate_key$candidate_name_dari)
candidate_key$candidate_name_dari <- gsub("\\s)", ")", candidate_key$candidate_name_dari)
candidate_key <- eng_candidates %>% left_join(dplyr::select(dari_candidates, ballot_position, candidate_name_dari)) %>%
left_join(dplyr::select(pashto_candidates, ballot_position, candidate_name_pashto))
str_split(candidate_key$candidate_name_dari, ")")
str_split(candidate_key$candidate_name_dari[1], ")")
str_split(candidate_key$candidate_name_dari[1], "\)")
str_split(candidate_key$candidate_name_dari[1], "\\)")
candidate_key$candidate_name_dari <- gsub("( ", "(", candidate_key$candidate_name_dari)
candidate_key$candidate_name_dari <- gsub("\\( ", "\\(", candidate_key$candidate_name_dari)
str_split(candidate_key$candidate_name_dari[1], "\\)")
str_split(candidate_key$candidate_name_dari[1], "\\(")
str_extract_all(candidate_key$candidate_name_dari, "\\([^()]+\\)")[[1]]
str_extract_all(candidate_key$candidate_name_dari, "\\([^()]+\\)")
candidate_key <- candidate_key %>% rowwise %>% mutate(
dari_honorific = str_extract("\\([^()]+\\)")
)
candidate_key <- candidate_key %>% rowwise %>% mutate(
dari_honorific = str_extract("\\([^()]+\\)", candidate_name_dari)
)
candidate_key <- candidate_key %>% rowwise %>% mutate(
dari_honorific = str_extract("\\([^()]+\\)"[[1]], candidate_name_dari)
)
candidate_key <- candidate_key %>% rowwise %>% mutate(
dari_honorific = str_extract("\\([^()]+\\)"[1], candidate_name_dari)
)
candidate_key <- candidate_key %>% mutate(
dari_honorific = str_extract("\\([^()]+\\)"[[1]], candidate_name_dari)
)
candidate_key <- candidate_key %>% mutate(
dari_honorific = str_extract_all("\\([^()]+\\)"[[1]], candidate_name_dari)
)
candidate_key <- candidate_key %>% rowwise %>% mutate(
dari_honorific = str_extract_all("\\([^()]+\\)"[[1]], candidate_name_dari)
)
candidate_key <- candidate_key %>% rowwise %>% mutate(
dari_honorific = str_extract_all("\\([^()]+\\)"[1], candidate_name_dari)
)
candidate_key <- candidate_key %>% rowwise %>% mutate(
dari_honorific = str_extract_all("\\([^()]+\\)", candidate_name_dari)
)
candidate_key$dari_honorific <- str_extract_all("\\([^()]+\\)", candidate_name_dari)
candidate_key$dari_honorific <- str_extract_all("\\([^()]+\\)", candidate_key$candidate_name_dari)
candidate_key$dari_honorific <- str_extract_all(candidate_key$candidate_name_dari, "\\([^()]+\\)")
candidate_key$dari_honorific[23]
trimws(candidate_key$dari_honorific[23])
?str_extract
candidate_key$dari_honorific <- str_match(candidate_key$candidate_name_dari, "\\([^()]+\\)")
candidate_key$dari_name <- paste0(candidate_key$candidate_name_dari, -candidate_key$dari_honorific)
candidate_key$dari_name <- str_remove(candidate_key$candidate_name_dari, candidate_key$dari_honorific)
candidate_key$dari_name <- str_replace(candidate_key$candidate_name_dari, candidate_key$dari_honorific)
?str_split()
candidate_key$dari_name <- str_split(candidate_key$candidate_name_dari, candidate_key$dari_honorific)[1]
candidate_key <- candidate_key %>% rowwise %>% mutate(dari_name = str_split(candidate_key$candidate_name_dari, candidate_key$dari_honorific)[1])
str_split(candidate_key$candidate_name_dari[1], candidate_key$dari_honorific[1])
candidate_key <- candidate_key %>% rowwise %>% mutate(dari_name = str_split(candidate_key$candidate_name_dari, candidate_key$dari_honorific)[[1]][1])
candidate_key <- candidate_key %>% rowwise %>% mutate(dari_name = str_split(candidate_name_dari, dari_honorific)[[1]][1])
candidate_key$dari_name <- gsub("(", "", candidate_key$dari_name)
candidate_key$dari_name[1]
candidate_key$dari_name <- gsub("\\( ", "", candidate_key$dari_name)
candidate_key$dari_name[1]
candidate_key$dari_name <- gsub("\\) ", "", candidate_key$dari_name)
candidate_key$dari_name[1]
str_split(candidate_key$dari_name[1], "(")
str_split(candidate_key$dari_name[1], "\\(")
candidate_key$dari_name <- trimws(gsub("\\(", "", candidate_key$dari_name))
candidate_key$dari_honorific <- trimws(gsub("\\( ", "(", candidate_key$dari_honorific))
candidate_key$dari_honorific <- trimws(gsub(" \\)", ")", candidate_key$dari_honorific))
candidate_key$candidate_name_dari_corrected <- paste0(dari_name, " ", dari_honorific)
candidate_key$candidate_name_dari_corrected <- paste0(candidate_key$dari_name, " ", candidate_key$dari_honorific)
candidate_key$candidate_name_dari_corrected <- paste0(candidate_key$dari_honorific, " ", candidate_key$dari_name)
candidate_key <- eng_candidates %>% left_join(dplyr::select(dari_candidates, ballot_position, candidate_name_dari)) %>%
left_join(dplyr::select(pashto_candidates, ballot_position, candidate_name_pashto))
candidate_key$candidate_code <- c("1095147", "5552641", "6359413", "4657143", "6350379", "7822442", "7770491", "6359075", "3907996", "2287256",
"8894180", "6359797", "860263", "3010205", "6350728", "6189430", "6350715", "6189294", "3907754", "977770",
"3010270", "926537", "3788581", "6178408", "997138", "6368755", "12223481", "6188208")
candidate_key$candidate_code <- c("1095147", "5552641", "6359413", "4657143", "6350379", "7822442", "7770491", "6359075", "3907996", "2287256",
"8894180", "6359797", "860263", "3010205", "6350728", "6189430", "6350715", "6189294", "3907754", "977770",
"3010270", "926537", "3788581", "6178408", "997138", "6368755", "12223481", "6188208", "6358686", "6370916",
"6358651", "7263746", "6155279", "6136166", "983418", "6359633", "1004871", "6371180", "5109208", "11348474",
"7849401")
candidate_key <- eng_candidates %>% left_join(dplyr::select(dari_candidates, ballot_position, candidate_name_dari)) %>%
left_join(dplyr::select(pashto_candidates, ballot_position, candidate_name_pashto)) %>% dplyr::select(
ballot_position, candidate_name_eng, candidate_name_dari, candidate_name_pashto
)
candidate_codes <- c("1095147", "5552641", "6359413", "4657143", "6350379", "7822442", "7770491", "6359075", "3907996", "2287256",
"8894180", "6359797", "860263", "3010205", "6350728", "6189430", "6350715", "6189294", "3907754", "977770",
"3010270", "926537", "3788581", "6178408", "997138", "6368755", "12223481", "6188208", "6358686", "6370916",
"6358651", "7263746", "6155279", "6136166", "983418", "6359633", "1004871", "6371180", "5109208", "11348474",
"7849401")
candidate_names_eng <- c("Haji Rahim Jan Shinzad",
candidate_names_dari <- c("الحاج رحيم جان شيرزاد )فی سبيل الله(,"
)
candidate_codes <- c("1095147", "5552641", "6359413", "4657143", "6350379", "7822442", "7770491", "6359075", "3907996", "2287256",
"8894180", "6359797", "860263", "3010205", "6350728", "6189430", "6350715", "6189294", "3907754", "977770",
"3010270", "926537", "3788581", "6178408", "997138", "6368755", "12223481", "6188208", "6358686", "6370916",
"6358651", "7263746", "6155279", "6136166", "983418", "6359633", "1004871", "6371180", "5109208", "11348474",
"7849401")
candidate_party <- c("مستقل", )
candidate_party <- c("مستقل",
"مستقل",
"مستقل",
"مستقل",
"حزب نھضت فراگير دموکراسی وترقی افغانستان",
"مستقل",
"مستقل",
"مستقل",
"مستقل",
"مستقل",
"مستقل",
"مستقل",
"حزب کنگره ملی افغانستان",
"د افغانستان د سولی غورځنګ ګوند",
"مستقل",
"مستقل",
"مستقل",
"مستقل",
"مستقل",
"مستقل",
"حزب آزادگان افغانستان",
"مستقل",
"مستقل",
"مستقل",
"مستقل",
"حزب حرکت انقلاب اسلامی و ملی افغانستان",
"مستقل",
"مستقل",
"حزب صلح ملی اسلامی افغانستان",
"مستقل",
"حزب استقلال افغانستان",
"مستقل",
"مستقل",
"مستقل",
"مستقل",
"مستقل",
"مستقل",
"مستقل",
"مستقل",
"مستقل",
"مستقل"
)
candidate_codes <- c("1095147", "5552641", "6359413", "4657143", "6350379", "7822442", "7770491", "6359075", "3907996", "2287256",
"8894180", "6359797", "860263", "3010205", "6350728", "6189430", "6350715", "6189294", "3907754", "977770",
"3010270", "926537", "3788581", "6178408", "997138", "6368755", "12223481", "6188208", "6358686", "6370916",
"6358651", "7263746", "6155279", "6136166", "983418", "6359633", "1004871", "6371180", "5109208", "11348474",
"7849401")
candidate_names_eng <- c("Haji Rahim Jan Shinzad", "Mohammad Yasin Safi", "Mohammad Sarwar Ahmadzai", "Eng. Moin-ul-din Ulfati",
"Dr. Habib Mangal", "Zabih-U-llah Ghazi Noristani", "Sayed Jalal Karim", "Mirwais Yasini", "Bismillah Shir",
"Bashir Ahmad Bizhan", "Motasim Billah Mazhabi", "Ashraf Ghani Ahmadzai", "Abdul Latif Pedram", "Shahnawaz Tanai",
"Dr. Mohammad Nasir Anis", "Mulla Abdul Salam Rakity", "Zia-ul-haq Hafizi", "Mohammad Akbar Oria", "Baz Mohammad Kofi",
"Sangin Mohammad Rahmani", "Mahbob-U-lah Koshani", "Mohammad Hakim Torsan", "Abdul Hasib Arian", "Mulla Ghulam Mohammad Rigi",
"Ramazan Bashardost", "Mawlawi Mohammad Sayed Hashimi", "Abdul Majid Samim", "Nasrullah Baryalai Arsalai", "Alhaj Shah Mahmood Popal",
"Mrs. Shahla Ata", "Dr. Ghulam Faroq Nijrabi", "Alhaj Abdul Ghafor Zori", "Mohammad Hashim Tawfiqi", "Haji Hasan Ali Sultani",
"Hamed Karzai", "Mawlana Abdul Qadir Imami Ghori", "Dr. Abdullah Abdullah", "Dr. Frozan Fana", "Abdul Jabar Sabit", "Hidayat Amin Arsala",
"Gul Ahmmad Yama")
candidate_names_dari <- c(
"الحاج رحيم جان شيرزاد )فی سبيل الله(",
"محمد ياسين ) صافی (",
"محمد سرور احمدزی",
"انجنير معين الدين الفتی",
"داکتر حبيب منگل",
"ذبيح الله غازی نورستانی",
"سيد جلال کريم",
"ميرويس ياسينی",
"بسم الله شير",
"بشير احمد بيژن",
"معتصم با􏲽 مذھبی",
"اشرف غنی احمدزی",
"عبداللطيف ) پدرام (",
"شھنواز تڼی",
"دوکتور محمد نصير انيس",
"ملا عبد السلام ) راکتی (",
"ضيا الحق ) حافظی (",
"محمد اکبر )اوريا (",
"باز محمد ) کوفی(",
"سنگين محمد ) رحمانی (",
"محبوب الله ) کوشانی(",
"محمد حکيم تورسن",
"عبدالحسيب ) آرين (",
"ملا غلام محمد )ريگی(",
"رمضان بشردوست",
"مولوی محمد سعيد ھاشمی",
"عبدالمجيد ) صميم (",
"نصرالله بريالی )ارسلائی(",
"الحاج شاه محمود پوپل",
"شھلا ) عطا (",
"پروفيسور دوکتور غلام فاروق ) نجرابی(",
"الحاج عبد الغفور )زوری(",
"محمد ھاشم توفيقی",
"الحاج حسن علی )سلطانی(",
"حامد کرزی",
"مولانا عبدالقادر امامی غوری",
"داکتر عبد الله ) عبدالله (",
"داکتر فروزان ) فنا (",
"عبدالجبار ثابت",
"ھدايت امين ارسلا",
"گل احمد )يما("
)
candidate_name_eng <- c("Haji Rahim Jan Shinzad", "Mohammad Yasin Safi", "Mohammad Sarwar Ahmadzai", "Eng. Moin-ul-din Ulfati",
"Dr. Habib Mangal", "Zabih-U-llah Ghazi Noristani", "Sayed Jalal Karim", "Mirwais Yasini", "Bismillah Shir",
"Bashir Ahmad Bizhan", "Motasim Billah Mazhabi", "Ashraf Ghani Ahmadzai", "Abdul Latif Pedram", "Shahnawaz Tanai",
"Dr. Mohammad Nasir Anis", "Mulla Abdul Salam Rakity", "Zia-ul-haq Hafizi", "Mohammad Akbar Oria", "Baz Mohammad Kofi",
"Sangin Mohammad Rahmani", "Mahbob-U-lah Koshani", "Mohammad Hakim Torsan", "Abdul Hasib Arian", "Mulla Ghulam Mohammad Rigi",
"Ramazan Bashardost", "Mawlawi Mohammad Sayed Hashimi", "Abdul Majid Samim", "Nasrullah Baryalai Arsalai", "Alhaj Shah Mahmood Popal",
"Mrs. Shahla Ata", "Dr. Ghulam Faroq Nijrabi", "Alhaj Abdul Ghafor Zori", "Mohammad Hashim Tawfiqi", "Haji Hasan Ali Sultani",
"Hamed Karzai", "Mawlana Abdul Qadir Imami Ghori", "Dr. Abdullah Abdullah", "Dr. Frozan Fana", "Abdul Jabar Sabit", "Hidayat Amin Arsala",
"Gul Ahmmad Yama")
candidate_name_dari <- c(
"الحاج رحيم جان شيرزاد )فی سبيل الله(",
"محمد ياسين ) صافی (",
"محمد سرور احمدزی",
"انجنير معين الدين الفتی",
"داکتر حبيب منگل",
"ذبيح الله غازی نورستانی",
"سيد جلال کريم",
"ميرويس ياسينی",
"بسم الله شير",
"بشير احمد بيژن",
"معتصم با􏲽 مذھبی",
"اشرف غنی احمدزی",
"عبداللطيف ) پدرام (",
"شھنواز تڼی",
"دوکتور محمد نصير انيس",
"ملا عبد السلام ) راکتی (",
"ضيا الحق ) حافظی (",
"محمد اکبر )اوريا (",
"باز محمد ) کوفی(",
"سنگين محمد ) رحمانی (",
"محبوب الله ) کوشانی(",
"محمد حکيم تورسن",
"عبدالحسيب ) آرين (",
"ملا غلام محمد )ريگی(",
"رمضان بشردوست",
"مولوی محمد سعيد ھاشمی",
"عبدالمجيد ) صميم (",
"نصرالله بريالی )ارسلائی(",
"الحاج شاه محمود پوپل",
"شھلا ) عطا (",
"پروفيسور دوکتور غلام فاروق ) نجرابی(",
"الحاج عبد الغفور )زوری(",
"محمد ھاشم توفيقی",
"الحاج حسن علی )سلطانی(",
"حامد کرزی",
"مولانا عبدالقادر امامی غوری",
"داکتر عبد الله ) عبدالله (",
"داکتر فروزان ) فنا (",
"عبدالجبار ثابت",
"ھدايت امين ارسلا",
"گل احمد )يما("
)
candidate_code <- c("1095147", "5552641", "6359413", "4657143", "6350379", "7822442", "7770491", "6359075", "3907996", "2287256",
"8894180", "6359797", "860263", "3010205", "6350728", "6189430", "6350715", "6189294", "3907754", "977770",
"3010270", "926537", "3788581", "6178408", "997138", "6368755", "12223481", "6188208", "6358686", "6370916",
"6358651", "7263746", "6155279", "6136166", "983418", "6359633", "1004871", "6371180", "5109208", "11348474",
"7849401")
party_name_dari <- c("مستقل",
"مستقل",
"مستقل",
"مستقل",
"حزب نھضت فراگير دموکراسی وترقی افغانستان",
"مستقل",
"مستقل",
"مستقل",
"مستقل",
"مستقل",
"مستقل",
"مستقل",
"حزب کنگره ملی افغانستان",
"د افغانستان د سولی غورځنګ ګوند",
"مستقل",
"مستقل",
"مستقل",
"مستقل",
"مستقل",
"مستقل",
"حزب آزادگان افغانستان",
"مستقل",
"مستقل",
"مستقل",
"مستقل",
"حزب حرکت انقلاب اسلامی و ملی افغانستان",
"مستقل",
"مستقل",
"حزب صلح ملی اسلامی افغانستان",
"مستقل",
"حزب استقلال افغانستان",
"مستقل",
"مستقل",
"مستقل",
"مستقل",
"مستقل",
"مستقل",
"مستقل",
"مستقل",
"مستقل",
"مستقل"
)
candidate_list <- data.frame(c(candidate_code, candidate_name_eng, candidate_name_dari, party_name_dari)) %>% mutate(ballot_position = row_number())
View(candidate_list)
candidate_list <- as.data.frame(c(candidate_code, candidate_name_eng, candidate_name_dari, party_name_dari)) %>% mutate(ballot_position = row_number())
candidate_list <- data.frame(cbind(c(candidate_code, candidate_name_eng, candidate_name_dari, party_name_dari))) %>% mutate(ballot_position = row_number())
View(candidate_list)
candidate_list <- cbind(c(candidate_code, candidate_name_eng, candidate_name_dari, party_name_dari)) %>% mutate(ballot_position = row_number())
candidate_list <- cbind(c(candidate_code, candidate_name_eng, candidate_name_dari, party_name_dari))
candidate_list <- cbind(candidate_code, candidate_name_eng)
candidate_list <- as.data.frame(cbind(candidate_code, candidate_name_eng, candidate_name_dari, party_name_dari)) %>% mutate(ballot_position = row_number())
View(candidate_list)
candidate_list <- as.data.frame(cbind(candidate_code, candidate_name_eng, candidate_name_dari, party_name_dari)) %>%
mutate(ballot_position = row_number()) %>% dplyr::select(ballot_position, everything())
candidate_list$candidate_gender[candidate_list$ballot_position == "30" | candidate_list$ballot_position == "38"] <- "F"
candidate_list$candidate_gender[is.na(candidate_list$candidate_gender)] <- "M"
candidate_list$candidate_gender[is.na(candidate_list$candidate_gender)] <- "M"
candidate_list$final_winner[candidate_list$ballot_position == "35"] <- "YES"
candidate_list$final_winner[is.na(candidate_list$final_winner)] <- "NO"
candidate_list$past_winner[candidate_list$ballot_position == "35"] <- "YES"
candidate_list$past_winner[is.na(candidate_list$past_winner)] <- "NO"
View(candidate_key)
View(candidate_list)
write.csv(candidate_list, "./past_elections/presidential_2009/keyfiles/candidate_key.csv", row.names = F)
rm(list = ls())
pc_raw <- pdf_text("./past_elections/presidential_2009/raw/pre_election_master_pc.pdf")
library(pdftools)
library(readr)
pc_raw <- pdf_text("./past_elections/presidential_2009/raw/pre_election_master_pc.pdf")
pc_text <- toString(pc_raw)
pc_text <- read_lines(pdf_text)
pc_text <- read_lines(pc_text)
pc_text
head(pc_text, 50)
pc_text_trimmed <- pc_text[-c(1:2), ]
pc_text <- read_lines(pc_text)
pc_text <- toString(pc_raw)
pc_text <- read_lines(pc_text)
pc_text_trimmed <- pc_text[-c(1:2), ]
dim(pc_text)
pc_text[1]
pc_text[2]
pc_text[3]
pc_text[4]
pc_text_trimmed <- pc_text[-c(1:3), ]
pc_text_trimmed <- pc_text[-1:3, ]
pc_text_trimmed <- pc_text[-1, ]
pc_text_trimmed <- pc_text[-1:3]
pc_text_trimmed <- pc_text[-c(1:3)]
pc_data <- Reduce(rbind, strsplit(trimws(pc_text_trimmed), "\\s{2,}"))
View(pc_data)
warnings()
rownames(pc_data) <- 1:dim(pc_data)[1]
head(pc_text_trimmed, 15)
pc_text_trimmed[1]
install.packages("tabulizer")
library(tabulizer)
install.packages(c("AER", "antiword", "arm", "assertthat", "backports", "BH", "binman", "boot", "broom", "carData", "caTools", "checkmate", "chron", "class", "classInt", "cli", "cluster", "coda", "codetools", "coefplot", "colorspace", "covr", "cowplot", "cubature", "curl", "data.table", "DBI", "devtools", "digest", "doParallel", "dotCall64", "dplyr", "e1071", "evaluate", "fields", "forcats", "foreach", "foreign", "formatR", "Formula", "gapminder", "gdalUtils", "gdtools", "geosphere", "GGally", "ggjoy", "ggmap", "ggmosaic", "ggplot2", "ggrepel", "git2r", "glue", "gtable", "haven", "hexbin", "highr", "Hmisc", "hms", "htmlTable", "htmlwidgets", "httpuv", "httr", "igraph", "interplot", "ISOcodes", "iterators", "jsonlite", "knitr", "Lahman", "lattice", "lazyeval", "lme4", "lmtest", "locpol", "lubridate", "mapdata", "mapproj", "maps", "maptools", "margins", "markdown", "MASS", "Matrix", "mgcv", "mime", "modelr", "munsell", "network", "nlme", "nloptr", "NLP", "np", "nycflights13", "officer", "openssl", "openxlsx", "pdftools", "pillar", "pkgconfig", "plotly", "plotrix", "prediction", "progress", "psych", "purrr", "qdap", "quadprog", "quanteda", "quantreg", "R.oo", "R.rsp", "R.utils", "R6", "raster", "Rcpp", "RcppArmadillo", "RcppEigen", "RcppParallel", "RCurl", "rdrobust", "readODS", "readr", "readtext", "readxl", "remotes", "reshape", "reshape2", "reticulate", "rgdal", "rgeos", "RgoogleMaps", "rio", "rJava", "rjson", "RJSONIO", "rlang", "rmarkdown", "Rnightlights", "rpart", "rprojroot", "RSelenium", "RSpectra", "rstudioapi", "Rttf2pt1", "rvest", "rvg", "sandwich", "scales", "selectr", "sf", "shiny", "slam", "SnowballC", "socviz", "sourcetools", "sp", "spacyr", "spam", "spbabel", "spdplyr", "srvyr", "streamR", "stringi", "stringr", "subprocess", "survey", "survival", "sys", "testthat", "tibble", "tidyr", "tidyselect", "tidyverse", "tm", "units", "useful", "utf8", "viridis", "viridisLite", "wdman", "wordcloud", "XML", "xml2", "xtable", "yaml", "zip", "zoo"))
